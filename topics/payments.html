

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Setting Up Payments for Apps and Add-ons &mdash; zamboni 0.8 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="zamboni 0.8 documentation" href="../index.html" />
    <link rel="next" title="Zamboni in Production" href="production.html" />
    <link rel="prev" title="OAuth" href="oauth.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="production.html" title="Zamboni in Production"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="oauth.html" title="OAuth"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">zamboni 0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="setting-up-payments-for-apps-and-add-ons">
<span id="payments"></span><h1>Setting Up Payments for Apps and Add-ons<a class="headerlink" href="#setting-up-payments-for-apps-and-add-ons" title="Permalink to this headline">¶</a></h1>
<p>You&#8217;ll have to configure your local dev environment with payment API info to
try out selling / buying an app or add-on.</p>
<div class="section" id="paypal-sandbox-settings">
<h2>PayPal Sandbox Settings<a class="headerlink" href="#paypal-sandbox-settings" title="Permalink to this headline">¶</a></h2>
<p>Add these URLs to your local settings to use the sandbox:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PAYPAL_API_URL</span> <span class="o">=</span> <span class="s">&#39;https://api-3t.sandbox.paypal.com/nvp&#39;</span>
<span class="n">PAYPAL_FLOW_URL</span> <span class="o">=</span> <span class="s">&#39;https://sandbox.paypal.com/webapps/adaptivepayment/flow/pay&#39;</span>
<span class="n">PAYPAL_PAY_URL</span> <span class="o">=</span> <span class="s">&#39;https://svcs.sandbox.paypal.com/AdaptivePayments/&#39;</span>
<span class="n">PAYPAL_PERMISSIONS_URL</span> <span class="o">=</span> <span class="s">&#39;https://svcs.sandbox.paypal.com/Permissions/&#39;</span>
<span class="n">PAYPAL_CGI_URL</span> <span class="o">=</span> <span class="s">&#39;https://www.sandbox.paypal.com/cgi-bin/webscr&#39;</span>
</pre></div>
</div>
<p>Make yourself an account on the <a class="reference external" href="https://developer.paypal.com/">PayPal developer site</a> and login. Go to the
API Credentials section (you might have to add a test seller account first)
and add the API credentials to your settings file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PAYPAL_CGI_AUTH</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;yourname._1318455663_biz_api1.domain.com&#39;</span><span class="p">,</span>
                   <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;&lt;the password&gt;&#39;</span><span class="p">,</span>
                   <span class="s">&#39;SIGNATURE&#39;</span><span class="p">:</span> <span class="s">&#39;&lt;signature&gt;&#39;</span><span class="p">}</span>
<span class="n">PAYPAL_EMAIL</span> <span class="o">=</span> <span class="s">&#39;yourname._1318455663_biz@domain.com&#39;</span>
<span class="n">PAYPAL_EMBEDDED_AUTH</span> <span class="o">=</span> <span class="n">PAYPAL_CGI_AUTH</span>
</pre></div>
</div>
<p>Set <tt class="docutils literal"><span class="pre">PAYPAL_APP_ID</span></tt> to the registered marketplace app; ask someone in
<tt class="docutils literal"><span class="pre">#amo</span></tt> if you don&#8217;t know it.</p>
<p>To use PayPal callbacks you&#8217;ll have to expose your local dev server on a real
domain to the Internet. The easiest way to do this is to use
<a class="reference external" href="http://progrium.com/localtunnel/">http://progrium.com/localtunnel/</a> Let&#8217;s say you run your dev server on port
8000. You can type this command:</p>
<div class="highlight-python"><pre>localtunnel 8000
   This localtunnel service is brought to you by Twilio.
   Port 8000 is now publicly accessible from http://4hcs.localtunnel.com ...</pre>
</div>
<p>That sets up a proxy to your localhost on <a class="reference external" href="http://4hcs.localtunnel.com">http://4hcs.localtunnel.com</a> (or
whatever it said). Add that as your <tt class="docutils literal"><span class="pre">SITE_URL</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SITE_URL</span> <span class="o">=</span> <span class="s">&#39;http://4hcs.localtunnel.com&#39;</span>
</pre></div>
</div>
<p>Most of the sandbox domains require https but they don&#8217;t have SSL certs! To
prepare for this, open up each one in a browser and accept the cert nag so
that it doesn&#8217;t mess up the modal dialog later. For example, load
<a class="reference external" href="https://sandbox.paypal.com/">https://sandbox.paypal.com/</a> in your browser.</p>
</div>
<div class="section" id="sell-an-app">
<h2>Sell an App<a class="headerlink" href="#sell-an-app" title="Permalink to this headline">¶</a></h2>
<p>Make sure the waffle switch <tt class="docutils literal"><span class="pre">marketplace</span></tt> is flipped on then create a test
<em>seller</em> account on the <a class="reference external" href="https://developer.paypal.com/">PayPal developer site</a>. This seller account has to
be different from the one linked to the API Credentials that you added in the
above settings.</p>
<p>Submit an app. On the last screen you&#8217;ll see a link to enroll your app in the
marketplace. Enter the email for the test seller account and enter any email
as the support contact. When you click continue, you&#8217;ll get a message that you
need to grant PayPal access to make refunds. Follow that link and log in with
the seller account you just created. If you were already logged in with the
other account you might have to log out first. When this is successful it will
post to your callback and you can continue enrolling your app in the
marketplace.</p>
</div>
<div class="section" id="buy-an-app">
<h2>Buy an App<a class="headerlink" href="#buy-an-app" title="Permalink to this headline">¶</a></h2>
<p>Create a test <em>buyer</em> account on the <a class="reference external" href="https://developer.paypal.com/">PayPal developer site</a>. Create a new
AMO user account that you will use to buy apps with. Go to an app page, click
the buy button, then enter the username / password of the test buyer account.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Setting Up Payments for Apps and Add-ons</a><ul>
<li><a class="reference internal" href="#paypal-sandbox-settings">PayPal Sandbox Settings</a></li>
<li><a class="reference internal" href="#sell-an-app">Sell an App</a></li>
<li><a class="reference internal" href="#buy-an-app">Buy an App</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="oauth.html"
                        title="previous chapter">OAuth</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="production.html"
                        title="next chapter">Zamboni in Production</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/topics/payments.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="production.html" title="Zamboni in Production"
             >next</a> |</li>
        <li class="right" >
          <a href="oauth.html" title="OAuth"
             >previous</a> |</li>
        <li><a href="../index.html">zamboni 0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, The Zamboni Collective.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>