

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing Zamboni &mdash; zamboni 0.8 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="zamboni 0.8 documentation" href="../../index.html" />
    <link rel="up" title="Install Zamboni" href="index.html" />
    <link rel="next" title="Installing In A VM With Vagrant" href="install-with-vagrant.html" />
    <link rel="prev" title="Install Zamboni" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install-with-vagrant.html" title="Installing In A VM With Vagrant"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Install Zamboni"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">zamboni 0.8 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Install Zamboni</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installing-zamboni">
<span id="installation"></span><h1>Installing Zamboni<a class="headerlink" href="#installing-zamboni" title="Permalink to this headline">¶</a></h1>
<p>We&#8217;re going to use all the hottest tools to set up a nice environment.  Skip
steps at your own peril. Here we go!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For less manual work, you can build Zamboni in a
<a class="reference internal" href="install-with-vagrant.html"><em>virtual machine using vagrant</em></a>.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>To get started, you&#8217;ll need:</dt>
<dd><ul class="first last simple">
<li>Python 2.6 (greater than 2.6.1)</li>
<li>MySQL</li>
<li>libxml2 (for building lxml, used in tests)</li>
</ul>
</dd>
</dl>
<p><a class="reference internal" href="#osx-packages"><em>OS X</em></a> and <a class="reference internal" href="#ubuntu-packages"><em>Ubuntu</em></a> instructions
follow.</p>
<p>There are a lot of advanced dependencies we&#8217;re going to skip for a fast start.
They have their own <a class="reference internal" href="#advanced-install"><em>section</em></a>.</p>
<p>If you&#8217;re on a Linux distro that splits all its packages into <tt class="docutils literal"><span class="pre">-dev</span></tt> and
normal stuff, make sure you&#8217;re getting all those <tt class="docutils literal"><span class="pre">-dev</span></tt> packages.</p>
<div class="section" id="on-ubuntu">
<span id="ubuntu-packages"></span><h3>On Ubuntu<a class="headerlink" href="#on-ubuntu" title="Permalink to this headline">¶</a></h3>
<p>The following command will install the required development files on Ubuntu or,
if you&#8217;re running a recent version, you can <a class="reference external" href="apt:python-dev,python-virtualenv,libxml2-dev,libxslt1-dev,libmysqlclient-dev,libmemcached-dev">install them automatically</a>:</p>
<div class="highlight-python"><pre>sudo aptitude install python-dev python-virtualenv libxml2-dev libxslt1-dev libmysqlclient-dev libmemcached-dev libssl-dev swig</pre>
</div>
</div>
<div class="section" id="on-os-x">
<span id="osx-packages"></span><h3>On OS X<a class="headerlink" href="#on-os-x" title="Permalink to this headline">¶</a></h3>
<p>The best solution for installing UNIX tools on OSX is <a class="reference external" href="http://github.com/mxcl/homebrew#readme">Homebrew</a>.</p>
<p>The following packages will get you set for zamboni:</p>
<div class="highlight-python"><pre>brew install python libxml2 mysql libmemcached openssl swig jpeg</pre>
</div>
</div>
<div class="section" id="mysql">
<h3>MySQL<a class="headerlink" href="#mysql" title="Permalink to this headline">¶</a></h3>
<p>You&#8217;ll probably need to <a class="reference internal" href="advanced-installation.html#configure-mysql"><em>configure MySQL after install</em></a>
(especially on Mac OS X) according to advanced installation.</p>
</div>
</div>
<div class="section" id="use-the-source">
<h2>Use the Source<a class="headerlink" href="#use-the-source" title="Permalink to this headline">¶</a></h2>
<p>Grab zamboni from github with:</p>
<div class="highlight-python"><pre>git clone --recursive git://github.com/mozilla/zamboni.git
cd zamboni
svn co http://svn.mozilla.org/addons/trunk/site/app/locale locale</pre>
</div>
<p><tt class="docutils literal"><span class="pre">zamboni.git</span></tt> is all the source code.  <tt class="docutils literal"><span class="pre">zamboni-lib.git</span></tt> is all of our
pure-Python dependencies.  <a class="reference internal" href="#updating"><em>Updating</em></a> is detailed later on.</p>
<p><tt class="docutils literal"><span class="pre">locale</span></tt> contains all of the localizations of the site.  Unless you are
specifically working with locales, you probably don&#8217;t need to touch this again
after you check it out.</p>
</div>
<div class="section" id="virtualenv">
<h2>virtualenv<a class="headerlink" href="#virtualenv" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> is a tool to create
isolated Python environments.  We don&#8217;t want to install packages system-wide
because that can create quite a mess.</p>
<div class="highlight-python"><pre>sudo easy_install virtualenv</pre>
</div>
<p>virtualenv is the only Python package I install system-wide.  Everything else
goes in a virtual environment.</p>
<div class="section" id="virtualenvwrapper">
<h3>virtualenvwrapper<a class="headerlink" href="#virtualenvwrapper" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.doughellmann.com/docs/virtualenvwrapper/">virtualenvwrapper</a>
is a set of shell functions that make virtualenv easy to work with.</p>
<p>Install it like this:</p>
<div class="highlight-python"><pre>wget http://bitbucket.org/dhellmann/virtualenvwrapper/raw/f31869779141/virtualenvwrapper_bashrc -O ~/.virtualenvwrapper
mkdir ~/.virtualenvs</pre>
</div>
<p>Then put these lines in your <tt class="docutils literal"><span class="pre">~/.bashrc</span></tt>:</p>
<div class="highlight-python"><pre>export WORKON_HOME=$HOME/.virtualenvs
source $HOME/.virtualenvwrapper</pre>
</div>
<p><tt class="docutils literal"><span class="pre">exec</span> <span class="pre">bash</span></tt> and you&#8217;re set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you didn&#8217;t have a <tt class="docutils literal"><span class="pre">.bashrc</span></tt> already, you should make a
<tt class="docutils literal"><span class="pre">~/.profile</span></tt> too:</p>
<div class="last highlight-python"><pre>echo 'source $HOME/.bashrc' &gt;&gt; ~/.profile</pre>
</div>
</div>
<div class="section" id="virtualenvwrapper-hooks-optional">
<h4>virtualenvwrapper Hooks (optional)<a class="headerlink" href="#virtualenvwrapper-hooks-optional" title="Permalink to this headline">¶</a></h4>
<p>virtualenvwrapper lets you run hooks when creating, activating, and deleting
virtual environments.  These hooks can change settings, the shell environment,
or anything else you want to do from a shell script.  For complete hook
documentation, see
<a class="reference external" href="http://www.doughellmann.com/docs/virtualenvwrapper/hooks.html">http://www.doughellmann.com/docs/virtualenvwrapper/hooks.html</a>.</p>
<p>You can find some lovely hooks to get started at <a class="reference external" href="http://gist.github.com/536998">http://gist.github.com/536998</a>.
The hook files should go in <tt class="docutils literal"><span class="pre">$WORKON_HOME</span></tt> (<tt class="docutils literal"><span class="pre">$HOME/.virtualenvs</span></tt> from
above), and <tt class="docutils literal"><span class="pre">premkvirtualenv</span></tt> should be made executable.</p>
</div>
</div>
</div>
<div class="section" id="getting-packages">
<h2>Getting Packages<a class="headerlink" href="#getting-packages" title="Permalink to this headline">¶</a></h2>
<p>Now we&#8217;re ready to go, so create an environment for zamboni:</p>
<div class="highlight-python"><pre>mkvirtualenv --no-site-packages zamboni</pre>
</div>
<p>That creates a clean environment named zamboni.  You can get out of the
environment by restarting your shell or calling <tt class="docutils literal"><span class="pre">deactivate</span></tt>.</p>
<p>To get back into the zamboni environment later, type:</p>
<div class="highlight-python"><pre>workon zamboni  # requires virtualenvwrapper</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you want to use a different Python binary, pass the path to
mkvirtualenv with <tt class="docutils literal"><span class="pre">--python</span></tt>:</p>
<div class="last highlight-python"><pre>mkvirtualenv --python=/usr/local/bin/python2.6 --no-site-packages zamboni</pre>
</div>
</div>
<div class="section" id="finish-the-install">
<h3>Finish the install<a class="headerlink" href="#finish-the-install" title="Permalink to this headline">¶</a></h3>
<p>From inside your activated virtualenv, run:</p>
<div class="highlight-python"><pre>pip install -r requirements/compiled.txt</pre>
</div>
<p>pip installs a few packages into our new virtualenv that we can&#8217;t distribute in
<tt class="docutils literal"><span class="pre">zamboni-lib</span></tt>.  These require a C compiler.</p>
</div>
</div>
<div class="section" id="settings">
<span id="example-settings"></span><h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Also see the Multiple Sites section below for using settings files to run
the Add-ons and Marketplace sites side by side.</p>
</div>
<p>Most of zamboni is already configured in <tt class="docutils literal"><span class="pre">settings.py</span></tt>, but there&#8217;s some
things you need to configure locally.  All your local settings go into
<tt class="docutils literal"><span class="pre">settings_local.py</span></tt>.  The settings template for
developers, included below, is at <a class="reference external" href="http://github.com/mozilla/zamboni/tree/master/docs/settings/settings_local.dev.py">docs/settings/settings_local.dev.py</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">default.settings</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">TEMPLATE_DEBUG</span> <span class="o">=</span> <span class="n">DEBUG</span>
<span class="n">DEBUG_PROPAGATE_EXCEPTIONS</span> <span class="o">=</span> <span class="n">DEBUG</span>

<span class="c"># These apps are great during development.</span>
<span class="n">INSTALLED_APPS</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="s">&#39;debug_toolbar&#39;</span><span class="p">,</span>
    <span class="s">&#39;django_extensions&#39;</span><span class="p">,</span>
    <span class="s">&#39;fixture_magic&#39;</span><span class="p">,</span>
    <span class="s">&#39;django_qunit&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c"># You want one of the caching backends.  Dummy won&#39;t do any caching, locmem is</span>
<span class="c"># cleared every time you restart the server, and memcached is what we run in</span>
<span class="c"># production.</span>
<span class="c">#CACHES = {</span>
<span class="c">#    &#39;default&#39;: {</span>
<span class="c">#        &#39;BACKEND&#39;: &#39;django.core.cache.backends.memcached.Memcached&#39;,</span>
<span class="c">#        &#39;LOCATION&#39;: &#39;localhost:11211&#39;,</span>
<span class="c">#    }</span>
<span class="c">#}</span>
<span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s">&#39;django.core.cache.backends.locmem.LocMemCache&#39;</span><span class="p">,</span>
        <span class="s">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s">&#39;zamboni&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c"># Caching is required for CSRF to work, please do not use the dummy cache.</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;zamboni&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;root&#39;</span><span class="p">,</span>
        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="s">&#39;OPTIONS&#39;</span><span class="p">:</span>  <span class="p">{</span><span class="s">&#39;init_command&#39;</span><span class="p">:</span> <span class="s">&#39;SET storage_engine=InnoDB&#39;</span><span class="p">},</span>
        <span class="s">&#39;TEST_CHARSET&#39;</span><span class="p">:</span> <span class="s">&#39;utf8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TEST_COLLATION&#39;</span><span class="p">:</span> <span class="s">&#39;utf8_general_ci&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c"># Skip indexing ES to speed things up?</span>
<span class="n">SKIP_SEARCH_INDEX</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">LOG_LEVEL</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
<span class="n">HAS_SYSLOG</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># For debug toolbar.</span>
<span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
    <span class="n">INTERNAL_IPS</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">,)</span>
    <span class="n">MIDDLEWARE_CLASSES</span> <span class="o">+=</span> <span class="p">(</span><span class="s">&#39;debug_toolbar.middleware.DebugToolbarMiddleware&#39;</span><span class="p">,)</span>
    <span class="n">DEBUG_TOOLBAR_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;HIDE_DJANGO_SQL&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
        <span class="s">&#39;INTERCEPT_REDIRECTS&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="p">}</span>

<span class="c"># If you&#39;re not running on SSL you&#39;ll want this to be False.</span>
<span class="n">SESSION_COOKIE_SECURE</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">SESSION_COOKIE_DOMAIN</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># Run tasks immediately, don&#39;t try using the queue.</span>
<span class="n">CELERY_ALWAYS_EAGER</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># Disables custom routing in settings.py so that tasks actually run.</span>
<span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># paths for images, not necessary for dev</span>
<span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="c"># Disable timeout code during development because it uses the signal module</span>
<span class="c"># which can only run in the main thread. Celery uses threads in dev.</span>
<span class="n">VALIDATOR_TIMEOUT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="c"># The user id to use when logging in tasks. You should set this to a user that</span>
<span class="c"># exists in your site.</span>
<span class="c"># TASK_USER_ID = 1</span>

<span class="n">WEBAPPS_RECEIPT_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ROOT</span><span class="p">,</span> <span class="s">&#39;mkt/webapps/tests/sample.key&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>I&#8217;m overriding the database parameters from <tt class="docutils literal"><span class="pre">settings.py</span></tt> and then extending
<tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> and <tt class="docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt> to include the <a class="reference external" href="http://github.com/robhudson/django-debug-toolbar">Django Debug
Toolbar</a>.  It&#8217;s awesome,
you want it.</p>
<p>Any file that looks like <tt class="docutils literal"><span class="pre">settings_local*</span></tt> is for local use only; it will be
ignored by git.</p>
</div>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>Instead of running <tt class="docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> your best bet is to grab a snapshot of
our production DB which has been redacted and pruned for development use.
Development snapshots are hosted over at
<a class="reference external" href="https://landfill.addons.allizom.org/db/">https://landfill.addons.allizom.org/db/</a></p>
<p>Here are some shell commands to pull down the latest snapshot and set it up:</p>
<div class="highlight-python"><pre>export DB_NAME=zamboni
export DB_USER=zamboni
mysqladmin -uroot create $DB_NAME
mysql -uroot -B -e'GRANT ALL PRIVILEGES ON $DB_NAME.* TO $DB_USER@localhost'
wget --no-check-certificate -P /tmp https://landfill.addons.allizom.org/db/landfill-`date +%Y-%m-%d`.sql.gz
zcat /tmp/landfill-`date +%Y-%m-%d`.sql.gz | mysql -u$DB_USER $DB_NAME
# Optionally, you can remove the landfill site notice:
mysql -uroot -e"delete from config where \`key\`='site_notice'" $DB_NAME</pre>
</div>
</div>
<div class="section" id="database-migrations">
<h2>Database Migrations<a class="headerlink" href="#database-migrations" title="Permalink to this headline">¶</a></h2>
<p>Each incremental change we add to the database is done with a versioned SQL
(and sometimes Python) file. To keep your local DB fresh and up to date, run
migrations like this:</p>
<div class="highlight-python"><pre>./vendor/src/schematic/schematic migrations</pre>
</div>
<p>More info on schematic: <a class="reference external" href="https://github.com/jbalogh/schematic">https://github.com/jbalogh/schematic</a></p>
</div>
<div class="section" id="multiple-sites">
<h2>Multiple sites<a class="headerlink" href="#multiple-sites" title="Permalink to this headline">¶</a></h2>
<p>We now run multiple sites off the zamboni code base. The current sites are:</p>
<ul class="simple">
<li><em>default</em> the Add-ons site at <a class="reference external" href="https://addons.mozilla.org/">https://addons.mozilla.org/</a></li>
<li><em>mkt</em> the Mozilla Marketplace at <a class="reference external" href="https://marketplace.mozilla.org/">https://marketplace.mozilla.org/</a></li>
</ul>
<p>There are modules in zamboni for each of these base settings to make minor
modifications to settings, url, templates and so on. Start by copying the
template from <tt class="docutils literal"><span class="pre">settings/settings_local.dev.py</span></tt> into a custom file.</p>
<p>To run the Add-ons site, make a <tt class="docutils literal"><span class="pre">settings_local_amo.py</span></tt> file with this import
header:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">default.settings</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Or to run the Marketplace site, make a <tt class="docutils literal"><span class="pre">settings_local_mkt.py</span></tt> file with
these imports:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mkt.settings</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="run-the-server">
<h2>Run the Server<a class="headerlink" href="#run-the-server" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;ve gotten the system requirements, downloaded <tt class="docutils literal"><span class="pre">zamboni</span></tt> and
<tt class="docutils literal"><span class="pre">zamboni-lib</span></tt>, set up your virtualenv with the compiled packages, and
configured your settings and database, you&#8217;re good to go.</p>
<p>To choose which site you want to run, use the <cite>settings</cite> command line
argument to pass in a local settings file you created above.</p>
<div class="section" id="run-the-add-ons-server">
<h3>Run The Add-ons Server<a class="headerlink" href="#run-the-add-ons-server" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>./manage.py runserver --settings=settings_local_amo 0.0.0.0:8000</pre>
</div>
</div>
<div class="section" id="run-the-marketplace-server">
<h3>Run The Marketplace Server<a class="headerlink" href="#run-the-marketplace-server" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>./manage.py runserver --settings=settings_local_mkt 0.0.0.0:8000</pre>
</div>
</div>
</div>
<div class="section" id="browser-id">
<h2>Browser ID<a class="headerlink" href="#browser-id" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="https://browserid.org/">Browser ID (Persona)</a> to log in and create accounts.
In order for this to work you need to set <tt class="docutils literal"><span class="pre">SITE_URL</span></tt> in your local
settings file based on how you run your dev server. Here is an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SITE_URL</span> <span class="o">=</span> <span class="s">&#39;http://localhost:8000&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-an-admin-user">
<h2>Create an Admin User<a class="headerlink" href="#create-an-admin-user" title="Permalink to this headline">¶</a></h2>
<p>To log into your dev site, you can click the login / register link and login
with Browser ID just like on the live site. However, if you want to grant
yourself admin privileges there are some additional steps. After registering,
find your user record:</p>
<div class="highlight-python"><pre>mysql&gt; select * from auth_user order by date_joined desc limit 1\G</pre>
</div>
<p>Then make yourself a superuser like this:</p>
<div class="highlight-python"><pre>mysql&gt; update auth_user set is_superuser=1, is_staff=1 where id=&lt;id from above&gt;;</pre>
</div>
<p>Additionally, add yourself to the admin group:</p>
<div class="highlight-python"><pre>mysql&gt; insert into groups_users (group_id, user_id) values (1, &lt;id from above&gt;);</pre>
</div>
<p>Next, you&#8217;ll need to set a password. Do that by clicking &#8220;I forgot my password&#8221;
on the login screen then go back to the shell you started your dev server in.
You&#8217;ll see the email message with the password reset link in stdout.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../hacking/testing.html#testing"><em>Testing</em></a> page has more info, but here&#8217;s the quick way to run
zamboni&#8217;s marketplace tests:</p>
<div class="highlight-python"><pre>./manage.py test --settings=settings_local_mkt</pre>
</div>
<p>Or to run AMO&#8217;s tests:</p>
<div class="highlight-python"><pre>./manage.py test --settings=settings_local_amo</pre>
</div>
</div>
<div class="section" id="updating">
<span id="id3"></span><h2>Updating<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h2>
<p>This updates zamboni:</p>
<div class="highlight-python"><pre>git checkout master &amp;&amp; git pull &amp;&amp; git submodule update --init</pre>
</div>
<p>This updates zamboni-lib in the <tt class="docutils literal"><span class="pre">vendor/</span></tt> directory:</p>
<div class="highlight-python"><pre>pushd vendor &amp;&amp; git pull &amp;&amp; git submodule update --init &amp;&amp; popd</pre>
</div>
<p>We use <a class="reference external" href="http://github.com/jbalogh/schematic/">schematic</a> to run migrations:</p>
<div class="highlight-python"><pre>./vendor/src/schematic/schematic migrations</pre>
</div>
<p>The <a class="reference internal" href="../hacking/contributing.html#contributing"><em>Contributing</em></a> page has more on managing branches.</p>
<p>If you want to pull in the latest locales:</p>
<div class="highlight-python"><pre>pushd locale &amp;&amp; svn up &amp;&amp; popd</pre>
</div>
</div>
<div class="section" id="contact">
<h2>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h2>
<p>Come talk to us on <a class="reference external" href="irc://irc.mozilla.org/amo">irc://irc.mozilla.org/amo</a> if you have questions, issues, or
compliments.</p>
</div>
<div class="section" id="submitting-a-patch">
<h2>Submitting a Patch<a class="headerlink" href="#submitting-a-patch" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference internal" href="../hacking/contributing.html#contributing"><em>Contributing</em></a> page.</p>
</div>
<div class="section" id="advanced-installation">
<span id="advanced-install"></span><h2>Advanced Installation<a class="headerlink" href="#advanced-installation" title="Permalink to this headline">¶</a></h2>
<p>In production we use things like memcached, rabbitmq + celery, sphinx, redis,
and LESS.  Learn more about installing these on the
<a class="reference internal" href="advanced-installation.html"><em>Getting Fancy</em></a> page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although we make an effort to keep advanced items as optional installs
you might need to install some components in order to run tests or start
up the development server.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installing Zamboni</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#on-ubuntu">On Ubuntu</a></li>
<li><a class="reference internal" href="#on-os-x">On OS X</a></li>
<li><a class="reference internal" href="#mysql">MySQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-the-source">Use the Source</a></li>
<li><a class="reference internal" href="#virtualenv">virtualenv</a><ul>
<li><a class="reference internal" href="#virtualenvwrapper">virtualenvwrapper</a><ul>
<li><a class="reference internal" href="#virtualenvwrapper-hooks-optional">virtualenvwrapper Hooks (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#getting-packages">Getting Packages</a><ul>
<li><a class="reference internal" href="#finish-the-install">Finish the install</a></li>
</ul>
</li>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#database-migrations">Database Migrations</a></li>
<li><a class="reference internal" href="#multiple-sites">Multiple sites</a></li>
<li><a class="reference internal" href="#run-the-server">Run the Server</a><ul>
<li><a class="reference internal" href="#run-the-add-ons-server">Run The Add-ons Server</a></li>
<li><a class="reference internal" href="#run-the-marketplace-server">Run The Marketplace Server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#browser-id">Browser ID</a></li>
<li><a class="reference internal" href="#create-an-admin-user">Create an Admin User</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#updating">Updating</a></li>
<li><a class="reference internal" href="#contact">Contact</a></li>
<li><a class="reference internal" href="#submitting-a-patch">Submitting a Patch</a></li>
<li><a class="reference internal" href="#advanced-installation">Advanced Installation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Install Zamboni</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="install-with-vagrant.html"
                        title="next chapter">Installing In A VM With Vagrant</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/topics/install-zamboni/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install-with-vagrant.html" title="Installing In A VM With Vagrant"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Install Zamboni"
             >previous</a> |</li>
        <li><a href="../../index.html">zamboni 0.8 documentation</a> &raquo;</li>
          <li><a href="index.html" >Install Zamboni</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, The Zamboni Collective.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>